<%- include("../partials/header") -%>

<div class="container">
    <form action="/vendas" method="post">
        <div class="row">
            <div class="col form-group">
                <h1 class="text-center">Criação de nova venda Nº <%= num + 1%></h1>
            </div>
        </div>
        <div class="row justify-content-between">
            <div class="col-10">
                <p>Procure abaixo um cliente abaixo!</p>
            </div>
            <div class="col-2">
                <button class="btn btn-outline-secondary" type="button" id="btnSemcliente">Sem cliente</button>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Digite o nome do cliente"
                        aria-label="Digite o nome do cliente" aria-describedby="button-addon2" id="inputName">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="btnPesquisar">Pesquisar</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <select name="cliente" id="select" class="form-control" hidden required></select>
            </div>
        </div>
        <hr>
        <div class="row justify-content-end">
            <div class="col-10 text-center">
                <h3>Produtos</h3>
            </div>
            <div class="col-2">
                <button type="button" class="btn btn-outline-primary" id="btAdc">Adicionar produto</button>
            </div>
        </div>
        <div id="produtos">
            <div class="row" id="produto">
                <div class="col form-group">
                    <label for="produto">Produto:</label>
                    <select name="produto" id="produto" class="form-control">
                        <% produtos.forEach(function(produto){ %>
                            <option value="<%= produto._id %>"><%= produto.nome %> - R$<%= produto.val.toFixed(2) %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="col-2 form-group">
                    <label for="qtd">Quantidade:</label>
                    <input type="number" name="qtd" id="qtd" class="form-control">
                </div>
                <div class="col-3 form-group">
                    <label for="adc">Adicional:</label>
                    <input type="number" name="adc" id="adc" class="form-control">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col form-group">
                <label for="valT">Valor da compra:</label>
                <input type="number" step="0.1" name="valT" id="valT" class="form-control" value="0">
            </div>
            <div class="col-2">
                <button type="button" class="btn btn-primary mb-1" id="btnCalcular">Calcular</button>
            </div>
        </div>
        <div class="row">
            <div class="col form-group">
                <label for="modoPg">Forma de Pagamento:</label>
                <select name="modoPg" id="modoPg" class="form-control">
                    <% modos.forEach(function (metodo){ %>
                        <option value="<%= metodo.cod%>">
                            <%= metodo.nome %>
                        </option>
                        <% }) %>
                    <option value="conta">Conta(para posterior pagamento)</option>
                </select>
            </div>
            <div class="col form-group">
                <label for="valE">Valor pago:</label>
                <input type="number" name="valE" step="0.1" id="valE" class="form-control" value="0">
            </div>
            <div class="col form-group">
                <label for="troco">Troco:</label>
                <input type="number" name="troco" id="troco" class="form-control" disabled>
            </div>
        </div>
        <div class="row">
            <div class="col form-group">
                <label for="obs">Descrição:</label>
                <input type="text" name="obs" id="obs" class="form-control">
            </div>
            <div class="col form-group">
                <label for="cpf">CPF:</label>
                <input type="text" name="cpf" id="cpf" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="form-check">
                    <input class="form-check-input is-invalid" type="checkbox" id="delivery" name="delivery">
                    <label class="form-check-label" for="delivery">
                        Delivery
                    </label>
                </div>
            </div>
            <div class="col-2 form-group">
                <label for="cfe">Emite Nota?</label>
                <input type="checkbox" value="sim" name="cfe" id="cfe" class="form-control">
            </div>
        </div>
        <input type="number" name="num" hidden value="<%= num + 1%>">
        <button type="submit" class="btn btn-primary btn-block mb-1">Finalizar venda</button>
    </form>
</div>

<script src="/scripts/socket.io.js"></script>
<script src="/scripts/venda/nova.js"></script>

<%- include("../partials/footer") -%>